<HTML>
<HEAD>
<title>Pelikello</title>
<link rel="stylesheet" type="text/css" href="themes.css">
<script src="format_time.js"> </script>    
<script src="goal_handler.js"> </script> 
<meta charset = "utf-8">
<audio id="myaudio" src="myaudio.mp3"></audio>

</HEAD>
<BODY>

<H2>Gameboard display</H2>

<table class="table1">
    <thead>
    <tr>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="homepenalty0nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="homepenalty0time"></output></th>       
                </tr>
            </table>
        </th>
        
        
        <th class="th1"><output id="homegoalsonscreen">00</output></th>
        <th class="th1"><output id="period">1</output></th>
        <th class="th1"><output id="visitorgoalsonscreen">00</output></th>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="visitorpenalty0nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="visitorpenalty0time"></output></th>       
                </tr>
            </table>
        </th>       
    </tr>
    </thead>
    <!--tbody-->
    <tr>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="homepenalty1nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="homepenalty1time"></output></th>       
                </tr>
            </table>
        </th>
        
        <td class="td2"><output id="hometimeout"></output></td>
        <td class="td1"><output id="breakperiod"></output></td>
        <td class="td3"><output id="visitortimeout"></output></td>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="visitorpenalty1nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="visitorpenalty1time"></output></th>       
                </tr>
            </table>
        </th> 
    </tr>
    <!--/tbody-->
    <tfoot>
    <tr>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="homepenalty2nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="homepenalty2time"></output></th>       
                </tr>
            </table>
        </th>
        <th class="th4">H</th>
        <th class="th1"><output id="result">00:00</output></th>
        <th class="th3">G</th>
        <th class="th3">
            <table class="table6">
                <tr>
                    <th class="th1">No.</th>
                    <th class="th2"><output id="visitorpenalty2nr"></output></th>
                </tr>
                <tr>
                    <th class="th1"></th>
                    <th class="th3"><output id="visitorpenalty2time"></output></th>       
                </tr>
            </table>
        </th>
    </tr>
    </tfoot>
</table>

<br><br>
<BR>
<BR>
<table class="table2">
    <tr>
        <th class="th1"><button class="button" id="homegoals" onclick="AddHomeGoal()" type="button">H</button></th>
        <th class="th4"></th>
        <th class="th1"><button class="button" id="visitorgoals" onclick="AddVisitorGoal()" type="button">G</button></th>
        <th class="th4"></th>
        <th class="th2"></th>
        <th class="th4"></th>
        <th class="th3">                       
            <table class="table5">
                <tr>
                    <td class="td1" id="A1"></td>
                    <td class="td1" id="B1"></td> 
                    <td class="td1" id="C1"></td> 
                    <td class="td1" id="D1"></td> 
                    <td class="td1" id="E1"></td>
                    <td class="td1" id="F1"></td> 
                    <td class="td1" id="G1"></td> 
                    <td class="td1" id="H1"></td>
                </tr>

                <tr>
                    <td class="td1" id="A2"></td>
                    <td class="td1" id="B2"></td> 
                    <td class="td1" id="C2"></td> 
                    <td class="td1" id="D2"></td> 
                    <td class="td1" id="E2"></td>
                    <td class="td1" id="F2"></td> 
                    <td class="td1" id="G2"></td> 
                    <td class="td1" id="H2"></td>
                </tr>
            </table>
        </th>                        
    </tr>
</table>

<table class="table3">
    <tr>
        <th class="th4"></th>
        <th class="th4"></th>
        <th class="th4"></th>
        <th class="th4"></th>
        <th class="th2"></th>
        <th class="th4"></th>
        <th class="th1"><button class="button" onclick="showActive('A1')">A</button></th>      
        <th class="th1"><button class="button" onclick="showActive('B1')">B</button></th>  
        <th class="th1"><button class="button" onclick="showActive('C1')">C</button></th>
        
        <th class="th1"><button class="button" onclick="showActive('D1')">D</button></th>      
        <th class="th1"><button class="button" onclick="showActive('E1')">E</button></th>                      
        <th class="th1"><button class="button" onclick="showActive('F1')">F</button></th> 
        <th class="th1"><button class="button" onclick="showActive('G1')">G</button></th>     
        <th class="th1"><button class="button">H</th> 
    </tr>
</table>
<br>
<table class="table4">
    <tr>
        <th class="th1"><button class="button1" id="homegoals" onclick="RemHomeGoal()" type="button">-</button></th>
        <th class="th2"></th>
        <th class="th1"><button class="button1" id="remvisitorgoals" onclick="RemVisitorGoal()" type="button">-</button></th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th1"><button class="button1" onclick="playSound()" type="button">Torvi</button></th>
        
        
        <th class="th2"></th>      
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>
        <th class="th1"><button class="button1" onclick="openMenu()">Menu</button></th>
        <th class="th2"></th>  
        <th class="th1"><button class="button1">7</button></th> 
        <th class="th1"><button class="button1">8</button></th>  
        <th class="th1"><button class="button1">9</button></th> 
    </tr>
    <tr>
        <th class="th2">H</th>
        <th class="th1"><button class="button1" id="updateGoalsToScreen" onclick="UpdateGoalsToScreen()" type="button">Result</button></th>
        <th class="th2">G</th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th1"><button class="button1">Reset</button></th>
        <th class="th2"></th>      
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>
        <th class="th1"><button class="button1">F1</button></th>      
        <th class="th2"></th>  
        <th class="th1"><button class="button1">4</button></th> 
        <th class="th1"><button class="button1">5</button></th>  
        <th class="th1"><button class="button1">6</button></th> 
    </tr>
    <tr>
        <th class="th1"><button class="button1" id="homegoals" onclick="AddHomeGoal()" type="button">+</button></th>
        <th class="th2"></th>
        <th class="th1"><button class="button1" id="visitorgoals" onclick="AddVisitorGoal()" type="button">+</button></th>        
        <th class="th2"></th>
        <th class="th1"><button class="button2" onclick="pauseWorker()">Stop</button></th>
        <th class="th2"></th>
        <th class="th1"><button class="button3" onclick="startWorker()">Start</button></th>
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>
        <th class="th2"></th>      
        <th class="th2"></th>  
        <th class="th1"><button class="button1">1</button></th> 
        <th class="th1"><button class="button1">2</button></th>  
        <th class="th1"><button class="button1">3</button></th> 
    </tr>
    <tr>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th2"></th>
        <th class="th2"></th>      
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>  
        <th class="th2"></th>
        <th class="th2"></th>      
        <th class="th2"></th>  
        <th class="th1"><button class="button1">0</button></th> 
        <th class="th1"><button class="button1" onclick="clearChanges()">Clear</button></th>  
        <th class="th1"><button class="button1" onclick="checkChanges()">Enter</button></th>
    </tr>
</table>



<script>
var homegoals = 0;
var visitorgoals = 0;

var w;
var pause_time = 0;
var new_pause_time = 0;
var str;
var break_time = 1;
var menu_state = 0;
var game_period = 30;
var break_period = 15;
var set_timeout = 20;
var short_penalty = 2;
var long_penalty = 5;
var period_count = 1;

var myVar;
var timeout_timer = 0;
var changed = 0;
var hometimeoutcount = 0;
var visitortimeoutcount = 0;

var player = [0,0,0,0,0,0];
//var home_player = [0,0,0];
//var visitor_player = [0,0,0];    
var penaltyVar = []; //indexes 0...2 for home, indexes 3...5 for visitor
var penalty_started = [0,0,0,0,0,0];
var penalty_paused = [0,0,0,0,0,0];
var penalty_timer = [0,0,0,0,0,0];


function AddHomeGoal(){
homegoals = homegoals + 1;
document.getElementById('homegoals').innerHTML = addGoal(homegoals);
//document.getElementById('homegoals').innerHTML = addGoal(homegoals);
}
function AddVisitorGoal(){
visitorgoals = visitorgoals + 1;
document.getElementById('visitorgoals').innerHTML = addGoal(visitorgoals);
//document.getElementById('visitorgoals').innerHTML = addGoal(visitorgoals);
}

function RemHomeGoal(){
if (homegoals > 0)
    homegoals = homegoals - 1;
else homegoals = 0;
document.getElementById('homegoals').innerHTML = remGoal(homegoals);
}

function RemVisitorGoal(){
if (visitorgoals > 0)
    visitorgoals = visitorgoals - 1;
else visitorgoals = 0;
document.getElementById('visitorgoals').innerHTML = remGoal(visitorgoals);

}

function UpdateGoalsToScreen(){
document.getElementById('homegoalsonscreen').innerHTML = addGoal(homegoals);    
document.getElementById('visitorgoalsonscreen').innerHTML = addGoal(visitorgoals);
}


function stopWorker() {
    w.terminate();
    w = undefined;
    new_pause_time = 0;  // oisko tää ok??
    pause_time = 0;  // oisko tää ok??    
    menu_state = 1;
    openMenu();
}


function pauseWorker() {
    if (pause_time < new_pause_time)
        pause_time = new_pause_time;
    w.terminate();
    w = undefined;
    menu_state = 1;
    openMenu();
    checkAndStopPenalties();
}

function startWorker() {
    if(typeof(Worker) !== "undefined") {
        if(typeof(w) === "undefined"  && (break_time === 1 || break_time <= period_count)) {
            w = new Worker("demo_workers.js");
        }
        //päivitä erä
        if (break_time > period_count)            
            break_time = period_count;
        else{
            document.getElementById("period").innerHTML = break_time;    
            w.onmessage = function(event) {             
            new_pause_time = pause_time + event.data;
            if (new_pause_time >= 10){  //game_period sekenteina //erän pituus 10s!!!!!!!!!!!!!!!!!!
                playSound();
                str = prefixZero(event.data + pause_time);
                document.getElementById("result").innerHTML = str;
                stopWorker();  //erän loppu
                checkAndStopPenalties();
                break_time += 1;
                play_sound();
            }
            else{ 
                str = prefixZero(event.data + pause_time);
                document.getElementById("result").innerHTML = str;
                checkAndStartPenalties();
            }
            };
        }   
    }
    else {
        document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Workers...";
    }
}

function openMenu(){

    if (menu_state === 0){
        document.getElementById('A1').innerHTML = "JÄÄKIEKKO";
        document.getElementById('C1').innerHTML = "JOUK.";
        document.getElementById('D1').innerHTML = "NIMI";
        document.getElementById('E1').innerHTML = game_period + ":00";
        document.getElementById('F1').innerHTML = break_period + ":00";
        document.getElementById('G1').innerHTML = "AIKA";                        
        document.getElementById('H1').innerHTML = "ÄÄNI";                        

        document.getElementById('A2').innerHTML = "TALL";
        document.getElementById('B2').innerHTML = "ULOS";
        document.getElementById('C2').innerHTML = "H";
        document.getElementById('D2').innerHTML = "G";
        document.getElementById('E2').innerHTML = "AIKA";
        document.getElementById('F2').innerHTML = "TAUKO";
        document.getElementById('G2').innerHTML = "YLÖS";                        
        document.getElementById('H2').innerHTML = "AUTO";         
        menu_state = 1;
    }
    else {
        document.getElementById('A1').innerHTML = "RANGAIST.";
        document.getElementById('C1').innerHTML = short_penalty +":00";
        document.getElementById('D1').innerHTML = long_penalty + ":00";
        document.getElementById('E1').innerHTML = "ERÄ";
        document.getElementById('F1').innerHTML = "AIKALISÄ";
        document.getElementById('G1').innerHTML = "";                        
        document.getElementById('H1').innerHTML = "0:00";                        
        
        document.getElementById('A2').innerHTML = "";
        document.getElementById('B2').innerHTML = set_timeout + "sec";
        document.getElementById('C2').innerHTML = "H:XX";
        document.getElementById('D2').innerHTML = "G:XX";
        document.getElementById('E2').innerHTML = period_count;
        document.getElementById('F2').innerHTML = "H/" + hometimeoutcount;
        document.getElementById('G2').innerHTML = "G/" + visitortimeoutcount;                        
        document.getElementById('H2').innerHTML = "+";         
        menu_state = 0;
    }
}

function checkChanges(){
    switch (changed){
        case 1:
            setGamePeriod();
            break;
        case 2:
            setBreakPeriod();
            break;
        case 3:
            setTimeoutPeriod();
            break;
        case 4:
            setLongPenalty();
            break;
        case 5:
            setPeriodCount();
            break;            
        case 6:
            setHomeTimeout();
            break;   
        case 7:
            setVisitorTimeout();
            break;
        case 8:
            setHomePenalty();
            break;
        case 9:
            setVisitorPenalty();
            break;   
        case 10:
            setShortPenaltyForPlayer();
            break;
        case 11:
            setLongPenaltyForPlayer();
            break;       
        default:
            break;            
    }
    
}

function setGamePeriod(){
    game_period = 12; // this must be given and read from numbers-pad
    var game_time = new Date();
    var col=document.getElementById("E1");
    col.style.color="black";
    game_time.setMinutes(game_period);
    document.getElementById("E1").innerHTML = game_time.getMinutes() + ":00";
    changed = 0;
}

function setBreakPeriod(){
    break_period = 2; // this must be given and read from numbers-pad
    var break_time = new Date();    
    var col=document.getElementById("F1");
    col.style.color="black";
    break_time.setMinutes(break_period);
    document.getElementById("F1").innerHTML = break_time.getMinutes() + ":00";
    changed = 0;
}

function setTimeoutPeriod(){
    set_timeout = 30; // this must be given and read from numbers-pad
    timeout_timer = set_timeout;
    var timeout_time = new Date(); 
    var col=document.getElementById("B2");
    col.style.color="black";
    timeout_time.setSeconds(set_timeout);
    document.getElementById("B2").innerHTML = timeout_time.getSeconds() + "sec";
    changed = 0;
}

function setLongPenalty(){
    long_penalty = 4;
    var long_penalty_time = new Date();
    var col=document.getElementById("D1");
    col.style.color="black";
    long_penalty_time.setMinutes(long_penalty);
    document.getElementById("D1").innerHTML = long_penalty_time.getMinutes() + ":00"; 
    changed = 0;
}

function setPeriodCount(){
    period_count = 4;
    var col=document.getElementById("E2");
    col.style.color="black";
    document.getElementById('E2').innerHTML = period_count;    
    changed = 0;
}


function setHomePenalty(){
    for (i = 0; i < 3; i++) {
//        if (home_player[i] === 0){
//            home_player[i] =22+i;// this must be given and read from numbers-pad
        if (player[i] === 0){
            player[i] =22+i;// this must be given and read from numbers-pad
            break;
        }
    }    
    var col=document.getElementById("C2");
    col.style.color="black";
//    document.getElementById('C2').innerHTML = "H:"+home_player[i];    
    document.getElementById('C2').innerHTML = "H:"+player[i]; 
    changed = 0;
}

function setVisitorPenalty(){
    for (i = 3; i < 6; i++) {
//        if (visitor_player[i] === 0){
//            visitor_player[i] =33+i;// this must be given and read from numbers-pad
        if (player[i] === 0){
            player[i] =33+i;// this must be given and read from numbers-pad            
            break;
        }
    }             
    var col=document.getElementById("D2");
    col.style.color="black";
//    document.getElementById('D2').innerHTML = "G:"+ visitor_player[i];    
    document.getElementById('D2').innerHTML = "G:"+ player[i];    
    changed = 0;
}

function setShortPenaltyForPlayer(){
    var col=document.getElementById("C1");
    col.style.color="black";
    var q;
    var temppi = document.getElementById('C2').innerHTML;
    var output_text = temppi.substring(2);
    if (output_text !== "XX"){
        updatePenaltyToScreen(short_penalty,"koti",output_text);
        q = setNextPenaltyIndex(3,output_text);
    }
    document.getElementById('C2').innerHTML = "H:XX";

//    var q = setNextHomePenaltyIndex(3,output_text);
        
    temppi = document.getElementById('D2').innerHTML;
    output_text = temppi.substring(2);
    if (output_text !== "XX"){
        updatePenaltyToScreen(short_penalty,"vieras",output_text);
        q = setNextPenaltyIndex(3,output_text);    
    }        
    document.getElementById('D2').innerHTML = "G:XX";        

//    q = setNextVisitorPenaltyIndex(3,output_text);
//    q = setNextPenaltyIndex(3,output_text);
}

function setLongPenaltyForPlayer(){
    var col=document.getElementById("D1");
    col.style.color="black";
    var q;
    var temppi = document.getElementById('C2').innerHTML;
    var output_text = temppi.substring(2);
    if (output_text !== "XX"){
        updatePenaltyToScreen(long_penalty,"koti",output_text);
        q = setNextPenaltyIndex(6,output_text);    
    }
    document.getElementById('C2').innerHTML = "H:XX";
      
    temppi = document.getElementById('D2').innerHTML;
    output_text = temppi.substring(2);
    if (output_text !== "XX"){
        updatePenaltyToScreen(long_penalty,"vieras",output_text);
        q = setNextPenaltyIndex(6,output_text); 
    }    
    document.getElementById('D2').innerHTML = "G:XX";  

}

function updatePenaltyToScreen(z,x,y){        
    alert(z+"min "+x+"joukuueen pelaajalle nro:"+y);
    if (x === "koti"){
        if (document.getElementById('homepenalty0nr').innerHTML === '')        
            document.getElementById('homepenalty0nr').innerHTML = y; 
        else if (document.getElementById('homepenalty1nr').innerHTML === '')        
            document.getElementById('homepenalty1nr').innerHTML = y; 
        else if (document.getElementById('homepenalty2nr').innerHTML === '')        
            document.getElementById('homepenalty2nr').innerHTML = y;
        else
            alert("kotijoukkueen jäähytaulu täynnä");

    }
    else{
        if (document.getElementById('visitorpenalty0nr').innerHTML === '')        
            document.getElementById('visitorpenalty0nr').innerHTML = y; 
        else if (document.getElementById('visitorpenalty1nr').innerHTML === '')        
            document.getElementById('visitorpenalty1nr').innerHTML = y; 
        else if (document.getElementById('visitorpenalty2nr').innerHTML === '')        
            document.getElementById('visitorpenalty2nr').innerHTML = y;
        else
            alert("vierasjoukkueen jäähytaulu täynnä");
    }
}

function setHomeTimeout(){
    var col=document.getElementById("F2");   
    col.style.color="black";
    changed = 0;
    if (hometimeoutcount >= 3)
        alert("no more timeouts for Home");
    else{
        startTimeout();
        hometimeoutcount = hometimeoutcount + 1;
        if (hometimeoutcount === 1)
            document.getElementById('hometimeout').innerHTML = "H"; 
        else if (hometimeoutcount === 2)
            document.getElementById('hometimeout').innerHTML = "H H";
        else
            document.getElementById('hometimeout').innerHTML = "H H H";
    }
    document.getElementById('F2').innerHTML = "H/" + hometimeoutcount;

}

function setVisitorTimeout(){
    var col=document.getElementById("G2");
    col.style.color="black";
    changed = 0;
    if (visitortimeoutcount >= 3)
        alert("no more timeouts for Visitor");
    else{
        startTimeout();
        visitortimeoutcount = visitortimeoutcount + 1;
        if (visitortimeoutcount === 1)
            document.getElementById('visitortimeout').innerHTML = "G"; 
        else if (visitortimeoutcount === 2)
            document.getElementById('visitortimeout').innerHTML = "G G";
        else
            document.getElementById('visitortimeout').innerHTML = "G G G";
    }
    document.getElementById('G2').innerHTML = "G/" + visitortimeoutcount; 
}


function store(){
    // store changed values to somewhere
}

function playSound(){
    var beep = new Audio();
    beep.src = "myaudio.mp3";
    beep.play();

}

function startTimeout(){
    myVar = setInterval(function(){ setTimeout(); }, 1000);    
}

function setTimeout() {
    if (timeout_timer === 0){
        clearInterval(myVar);
        document.getElementById('breakperiod').innerHTML = '';
        playSound();
        timeout_timer = set_timeout;
    }
    else if (timeout_timer < 0)
        clearInterval(myVar);
    else{
        timeout_timer = timeout_timer - 1;
        document.getElementById('breakperiod').innerHTML = timeout_timer;
        }
}
 
function stopTimeout() {
  clearInterval(myVar);
}


function showActive(x){
    switch (x){
        case "E1":
            if (menu_state === 1){
                var col=document.getElementById("E1");
                changed = 1;    
            }
            else{
                var col=document.getElementById("E2");
                changed = 5;            
            }             
            break;
        case "F1":
            if (menu_state === 1){
                var col=document.getElementById("F1");
                changed = 2;    
            }
            else{
                var col=document.getElementById("F2");
                changed = 6;            
            }             
            break;
        case "B1":                
            if (set_timeout === 30){
                var col=document.getElementById("D1");
                changed = 11;
            }
            else{
                var col=document.getElementById("B2");
                changed = 3;            
            }             
            break;
        case "D1": 
            if (long_penalty === 5){
                var col=document.getElementById("D1");
                changed = 4;
            }
            else{
                var col=document.getElementById("D2");
                changed = 9;            
            }             
            break;

        case "G1": 
            var col=document.getElementById("G2");
            changed = 7;
            break;
        case "C1": 
            var col=document.getElementById("C2");
            changed = 8;
            break;
        
        case "A1": 
            var col=document.getElementById("C1");
            changed = 10;

        default:
            break;
    }
    col.style.color="red";
}


function startPenaltyTimer(i){
    penaltyVar[i] = setInterval(function(){ setPenaltyTimer(i); }, 1000);
    penalty_started[i] = 1;
}

function setPenaltyTimer(i) {
    var p_timer;

    if (i < 3){
        if (penalty_timer[i] === 0){
            clearInterval(penaltyVar[i]);
            document.getElementById('homepenalty'+i+'time').innerHTML = '';
            document.getElementById('homepenalty'+i+'nr').innerHTML = '';
//            home_player[i] = 0;
            player[i] = 0;
            penalty_started[i] = 0;
        }
        else if (penalty_timer[i] < 0)
            clearInterval(penaltyVar[i]);
        else{
            penalty_timer[i] = penalty_timer[i] - 1;
            p_timer = prefixZero(penalty_timer[i]);
            document.getElementById('homepenalty'+i+'time').innerHTML = p_timer;
            penalty_started[i] = 1;        
        }
    }
    else if (2 < i < 6){
        if (penalty_timer[i] === 0){
            clearInterval(penaltyVar[i]);
            document.getElementById('visitorpenalty'+(i-3)+'time').innerHTML = '';
            document.getElementById('visitorpenalty'+(i-3)+'nr').innerHTML = '';
//            visitor_player[i-3] = 0;
            player[i] = 0;
            penalty_started[i] = 0;
        }
        else if (penalty_timer[i] < 0)
            clearInterval(penaltyVar[i]);
        else{
            penalty_timer[i] = penalty_timer[i] - 1;
            p_timer = prefixZero(penalty_timer[i]);
            document.getElementById('visitorpenalty'+(i-3)+'time').innerHTML = p_timer;
            penalty_started[i] = 1;        
        }
    }


}

function stopPenaltyTimer(i) {
  clearInterval(penaltyVar[i]);
}


function clearChanges(){
    var col=document.getElementById("A1");
    col.style.color="black";
    col=document.getElementById("B1");
    col.style.color="black";    
    col=document.getElementById("C1");
    col.style.color="black";
    col=document.getElementById("D1");
    col.style.color="black";    
    col=document.getElementById("E1");
    col.style.color="black";
    col=document.getElementById("F1");
    col.style.color="black";
    col=document.getElementById("G1");
    col.style.color="black";
    col=document.getElementById("H1");
    col.style.color="black";
    col=document.getElementById("A2");
    col.style.color="black";
    col=document.getElementById("B2");    
    col.style.color="black";
    col=document.getElementById("C2");
    col.style.color="black";
    col=document.getElementById("D2");
    col.style.color="black";
    col=document.getElementById("E2");
    col.style.color="black";
    col=document.getElementById("F2");
    col.style.color="black";
    col=document.getElementById("G2");
    col.style.color="black";
    col=document.getElementById("H2");
    col.style.color="black";
    changed = 0;
}


function checkAndStartPenalties(){
   
    for (i = 0; i < 6; i++){
//        if (home_player[i] !== 0 && (penalty_started[i] === 0 || penalty_paused[i] === 1)){        
        if (player[i] !== 0 && (penalty_started[i] === 0 || penalty_paused[i] === 1)){
            startPenaltyTimer(i);
            penalty_paused[i] = 0;
        }
    }

//    for (i = 3; i < 6; i++){        
//        if (visitor_player[i-3] !== 0 && (penalty_started[i] === 0 || penalty_paused[i] === 1)){
//        if (player[i] !== 0 && (penalty_started[i] === 0 || penalty_paused[i] === 1)){
//            startPenaltyTimer(i);
//            penalty_paused[i] = 0;
//        }
//    }    
}


function checkAndStopPenalties(){
    
    for (i = 0; i < 6; i++){
//        if (home_player[i] !== 0 && (penalty_started[i] === 1)){
        if (player[i] !== 0 && (penalty_started[i] === 1)){            
            stopPenaltyTimer(i);
            penalty_paused[i] = 1;
        }      
    }

//    for (i = 3; i < 6; i++){
//        if (visitor_player[i-3] !== 0 && (penalty_started[i] === 1)){
//        if (player[i] !== 0 && (penalty_started[i] === 1)){            
//            stopPenaltyTimer(i);
//            penalty_paused[i] = 1;
//        }      
//    }            
}

function setNextHomePenaltyIndex(x,output_text){    
    for (i = 0; i < 3; i++){
//        if (home_player[i] == output_text){
        if (player[i] === output_text){            
            break;
        }      
    }
    penalty_timer[i] = x;
    return i;
}
function setNextVisitorPenaltyIndex(x,output_text){
    for (i = 3; i < 6; i++){
//        if (visitor_player[i-3] === output_text){
        if (player[i] === output_text){            
            break;
        }      
    }
    penalty_timer[i] = x;
    return i;
}


function setNextPenaltyIndex(x,output_text){
    for (i = 0; i < 6; i++){
//        if (visitor_player[i-3] === output_text){
        if (player[i] === output_text){            
            break;
        }      
    }
    penalty_timer[i] = x;    
    return i;
}

</script>




</BODY>
</HTML>
